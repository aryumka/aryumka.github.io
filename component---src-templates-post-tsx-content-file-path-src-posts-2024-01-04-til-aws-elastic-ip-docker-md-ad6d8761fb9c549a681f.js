"use strict";(self.webpackChunkaryumka_me=self.webpackChunkaryumka_me||[]).push([[753],{6062:function(e,t,a){a.r(t);var n=a(9128),l=a(9474);function r(e){const t=Object.assign({h3:"h3",a:"a",p:"p",img:"img",span:"span",br:"br",del:"del"},(0,n.R)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.h3,{id:"aws-탄력적-ip-설정"},l.createElement(t.a,{href:"#aws-탄력적-ip-설정"},"aws 탄력적 ip 설정")),"\n",l.createElement(t.p,null,"인스턴스를 껐다 켰다 할 때마다 ip가 바뀌어서 너무 불편했다. 고정 ip를 생성해봤다. 너무너무 간단하다.\n인스턴스 > 네트워크 및 보안 > 탄력적 ip에서 생성\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/285832a5-29dd-4373-97ae-d3e1449495ea/image.png",alt:""}),"\n현재 ec2 인스턴스와 연결\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/fce6cadf-f831-46c9-b225-d01bb70181a4/image.png",alt:""}),"\n성공!\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/74dd0c4d-5c12-49aa-86e0-6c613e3dea22/image.png",alt:""})),"\n",l.createElement(t.h3,{id:"docker-사용해보기"},l.createElement(t.a,{href:"#docker-사용해보기"},"Docker 사용해보기")),"\n",l.createElement(t.p,null,"사용중인 OS는 윈도우지만 git Bash를 인텔리제이의 기본 터미널로 설정해주었다.\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/4a7e1723-d886-4475-81d7-969eba5185f3/image.png",alt:""})),"\n",l.createElement(t.p,null,"먼저 프로젝트 루트에 dockerfile을 만들어준다. dockerfile은 확장자가 없다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">FROM openjdk:19\nCMD ["java", "-jar", "./build/libs/vc-erp-0.0.1-SNAPSHOT.jar"]</code></pre></div>'}}),"\n",l.createElement(t.p,null,l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">FROM</code>'}})," - 베이스 이미지이다.",l.createElement(t.br),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">CMD</code>'}})," - 컨테이너가 시작할 때 실행할 명령어이다.\n아래 명령어를 실행하여 도커 빌드를 해줬다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker build . -t springbootapp</code></pre></div>'}}),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/36ab57eb-4491-4564-b98d-80c168270d02/image.png",alt:""}),"\n그리고 실행하기 위해 다음 명령을 입력했다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker run springbootapp</code></pre></div>'}}),"\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/7e7cc0e4-5d28-4ccc-adc0-74fd1f21e6fa/image.png",alt:""}),"\n",l.createElement(t.p,null,"위와 같은 에러가 난다.\n위와 같이 도커에서 해당 어플리케이션을 실행하기 위해서는 빌드한 jar가 도커 컨테이너 안에 있어야 하기 때문이다. 그러나 위 명령어를 통해 빌드한 파일은 현재 내 PC에만 존재한다. 따라서 위 파일을 컨테이너로 copy해주어야 한다.\n",l.createElement(t.del,null,"원격 서버에 빌드된 jar를 배포하는 것과 비슷하다.")),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">COPY ./build/libs/vc-erp-0.0.1-SNAPSHOT.jar /build/libs/vc-erp-0.0.1-SNAPSHOT.jar</code></pre></div>'}}),"\n",l.createElement(t.p,null,"[명령어] [현재파일경로] [복사할경로] 순으로 적어준다."),"\n",l.createElement(t.p,null,"다시 빌드 후 실행하면 일단 jar 실행은 잘 된다.\n",l.createElement(t.img,{src:"https://velog.velcdn.com/images/aryumka/post/82bdd78f-b619-4ec7-b254-2fb034763223/image.png",alt:""})),"\n",l.createElement(t.p,null,"하지만 위의 jar가 실행이 안되었던 것과 비슷한 이유로 외부에서 컨테이너의 어플리케이션에 접근하기 위해서는 컨테이너의 포트를 열어줘야 한다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker run -p 50000:8080 springbootapp</code></pre></div>'}}),"\n",l.createElement(t.p,null,"run 명령에 위와같은 -p [로컬 포트번호]:[외부포트] 옵션을 추가해준다"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"http://localhost:8080",rel:"nofollow noopener noreferrer"},"http://localhost:8080")," 에 잘 접속된다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">WORKDIR /usr/src/app</code></pre></div>'}}),"\n",l.createElement(t.p,null,"working directory는 위 명령어로 설정해준다. 설정 후 복사될 경로, 실행파일 경로 등을 상대경로로 바꾸어준다(./~~)."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker run -p 50000:8080 -v $(pwd):/usr/src/app springbootapp</code></pre></div>'}}),"\n",l.createElement(t.p,null,"실행 시 volume을 설정할 수도 있다.\nvolume: volume을 설정하면 호스트머신의 로컬의 파일을 컨테이너가 사용할 수 있으며 컨테이너끼리 데이터를 공유할 수도 있다."),"\n",l.createElement(t.p,null,"최종 dockerfile은 아래와 같다."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">FROM openjdk:19\nWORKDIR /usr/src/app\nCOPY ./build/libs/vc-erp-0.0.1-SNAPSHOT.jar ./build/libs/vc-erp-0.0.1-SNAPSHOT.jar\nCMD ["java", "-jar", "./build/libs/vc-erp-0.0.1-SNAPSHOT.jar"]</code></pre></div>'}}))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.R)(),e.components);return t?l.createElement(t,e,l.createElement(r,e)):r(e)}},1024:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var n=a(6062),l=a(5530),r=a(9474),s=a(8844),c=a(1047),o=a(8928),i=a.n(o),g=a(3893),m=a(2887),d=a(5909),p=a(589),u=a(5181),h=a.n(u),f=a(2195),v=a(6810);i().extend(a(1997));const b=e=>{let{data:t,location:a,pageContext:n,children:l}=e;const{tableOfContents:o,fields:u,frontmatter:b,excerpt:E}=t.mdx,{series:x}=n,k=i()(u.date).locale("ko").format(),S={headline:b.title,dateModified:k,datePublished:k,image:""+a.href+b.image,mainEntityOfPage:{"@type":"WebPage","@id":a.href},author:{"@type":"Person",name:"Lee Sun-Hyoup"},url:a.href,description:E,"@type":"BlogPosting","@context":"https://schema.org"};(0,r.useEffect)((()=>{void 0!==typeof document&&h()((function(){h()(".post-container a[data-footnote-ref]").each(((e,t)=>{var a;const n=null===(a=h()(t).attr("href"))||void 0===a?void 0:a.slice(1),l=h()("#"+n).text().replace("↩","");h()(t).attr("data-tooltip",l)}))}))}),[]);const{0:_,1:j}=(0,r.useState)();(0,r.useEffect)((()=>{j(t.allMdx.edges.filter((e=>e.node.fields.slug!==u.slug)).sort((()=>Math.random()-.5)).slice(0,6))}),[]);const M=b.draft&&!0;return(0,v.Y)(s.A,null,(0,v.Y)(c.A,{title:b.title,description:E,meta:[{name:"article:published_time",content:i()(u.date).locale("ko").format()},{name:"image",content:"https://aryumka.me"+b.image},{property:"og:image",content:"https://aryumka.me"+b.image},{property:"og:image:secure_url",content:"https://aryumka.me"+b.image}]}),(0,v.Y)(p.m,null,(0,v.Y)("script",{type:"application/ld+json"},JSON.stringify(S))),(0,v.Y)("h1",{className:"post-title"},b.title),(0,v.Y)("span",{className:"post-date"},"Written on ",i()(u.date).locale("en").format("LL")),(0,v.Y)("img",{src:b.image,style:{objectFit:"cover",maxHeight:300,width:"100%"}}),M||o.items&&(0,v.Y)(d.A,{items:o.items}),M||(null==x?void 0:x.items)&&(0,v.Y)(f.A,{title:x.title,items:x.items,currentItem:b.title}),(0,v.Y)("div",{className:"post-content"},M?(0,v.Y)(y,null,"Not yet published"):l),(0,v.Y)(g.A,{tags:b.tags,comment:b.comments}),_&&(0,v.Y)(m.A,{posts:_,current:u.slug}))};function E(e){return r.createElement(b,e,r.createElement(n.default,e))}const y=(0,l.A)("div",{target:"ezegrm70"})({name:"xl5zip",styles:"margin:16px 0;font-weight:bold;font-size:20px;text-align:center"})}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-src-posts-2024-01-04-til-aws-elastic-ip-docker-md-ad6d8761fb9c549a681f.js.map